<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../iron-list/iron-list.html">
<link rel="import" href="../../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../paper-dialog/paper-dialog.html">

<link rel="import" href="../../input-image-item/input-image-item.html">
<link rel="import" href="../../confusion-matrix/confusion-matrix.html">
<link rel="import" href="../../dialog-header/dialog-header.html">
<link rel="import" href="../../dialog-header/categorized-header-item/categorized-header-item.html">
<link rel="import" href="../../dialog-behavior/dialog-behavior.html">
<link rel="import" href="../../section-header/section-header.html">

<!--
	When opened, this module displays a confusion matrix of the currently 
	selected model predicting all of its input images. When navigating this 
	matrix, a list of relevant input images is shown. By clicking on one of them 
	they can be selected as the input image for further visualizations.
-->
<dom-module id="input-image-selection-dialog">
	<template>
		<paper-dialog with-backdrop>
			<dialog-header event-id="input-image-selection-dialog">
				<div class="header-items">
					<categorized-header-item
						category="Model"
						title=[[model.displayName]]
						caption="Version [[model.version]]">
					</categorized-header-item>
					<categorized-header-item
						category="Dataset"
						title=[[dataset.displayName]]
						caption="[[dataset.imageCount]] images">
					</categorized-header-item>
					<categorized-header-item
						category="Distortion"
						title=[[distortion.displayName]]
						caption="[[distortion.type]]">
					</categorized-header-item>
				</div>
			</dialog-header>
			<div id="content">
				<div class="container" id="matrix-container">
					<section-header
						text="Confusion Matrix">
					</section-header>
					<confusion-matrix
						model=[[model.name]]
						distortion=[[distortion.name]]
						request-manager=[[requestManager]]>
					</confusion-matrix>
				</div>
				<div class="container" id="image-list-container">
					<section-header
						text="Input Images">
					</section-header>
					<iron-list
						class="flex"
						items="[[availableImages]]" as="image" grid
						selection-enabled selected-item="{{selectedImage}}">
						<template>
							<input-image-item
								image=[[image]]
								selected={{selected}}
								data-image-index$={{index}}
								on-tap="_inputImageClicked">
							</input-image-item>
						</template>
					</iron-list>
				</div>
			</div>
		</paper-dialog>
		
		<link rel="stylesheet" type="text/css" href="input-image-selection-dialog.css">
	</template>

	<script src="input-image-selection-dialog.js"></script>
</dom-module>
