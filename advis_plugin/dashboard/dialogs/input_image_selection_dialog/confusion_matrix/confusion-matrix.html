<link rel="import" href="../../tf-backend/tf-backend.html">
<link rel="import" href="../../polymer/polymer.html">

<link rel="import" href="../../libraries/chroma/chroma.html">
<link rel="import" href="../../zoomable-canvas/zoomable-canvas.html">
<link rel="import" href="../../label-view/label-view.html">

<!--
	This component visualizes a model's predictions as a zoomable and interactive 
	confusion matrix.
-->
<dom-module id="confusion-matrix">
	<template>
		<div id="content">
			<div id="matrix">
				<div class="row">
					<div id="predicted-labels">
						<label-view
							width="[[_contentSize]]"
							height="60"
							orientation="horizontal"
							offset=[[horizontalOffset]]
							category-hierarchy=[[_categoryHierarchy]]
							category-count=[[_categories.length]]>
						</label-view>
					</div>
				</div>
				<div class="row">
					<div id="actual-labels"></div>
					<zoomable-canvas
						src=[[_matrixImage]]
						size=[[_contentSize]]
						hovered-pixel={{hoveredPixel}}
						vertical-offset={{verticalOffset}}
						horizontal-offset={{horizontalOffset}}>
					</zoomable-canvas>
					<div id="recall"></div>
				</div>
				<div class="row">
					<div id="precision"></div>
				</div>
			</div>
			<div id="hovered" class$="[[_getHoverClass(hoveredPixel)]]">
				<div id="actual" class="label">
					<p class="category">Actual</p>
					<p class="single-line title">[[_getLabel(hoveredPixel.y)]]</p>
				</div>
				<div id="value">
					<p class="title">[[_getMatrixValue(hoveredPixel.y, hoveredPixel.x)]]</p>
				</div>
				<div id="predicted" class="label">
					<p class="category">Predicted</p>
					<p class="single-line title">[[_getLabel(hoveredPixel.x)]]</p>
				</div>
			</div>
		</div>
		
		<link rel="stylesheet" type="text/css" href="confusion-matrix.css">
	</template>

	<script src="confusion-matrix.js"></script>
</dom-module>
