<link rel="import" href="../neon-animation/neon-animatable-behavior.html">
<link rel="import" href="../neon-animation/animations/fade-in-animation.html">
<link rel="import" href="../neon-animation/animations/fade-out-animation.html">

<link rel="import" href="../libraries/chroma/chroma.html">
<link rel="import" href="../color-legend/color-legend.html">
<link rel="import" href="../visualization-comparison-behavior/visualization-comparison-behavior.html">

<link rel="import" href="../dialogs/unit-details-dialog/unit-details-dialog.html">
<link rel="import" href="../dialogs/activation-visualization-settings-dialog/activation-visualization-settings-dialog.html">

<!--
	This component calculates the per-pixel difference between the activations of 
	each same unit on normal and distorted input images and highlights them.
-->
<dom-module id="difference-comparison">
	<template>
		<div id="content"
			class$=[[getImageClass(state)]]>
			<div id="legend-container">
				<color-legend
					on-tap="_legendClicked"
					only-gradient
					width="10"
					height="[[_originalMetaData.configuration.height]]"
					style$="[[_getLegendStyle(_originalMetaData.configuration.height)]]"
					color-scale="[[_colorScale]]">
				</color-legend>
			</div>
			
			<div id="container">
				<div class="image-wrapper" id="normal-images-wrapper">
					<img id="difference-image"
						class="activation-visualization"
						src$=[[_differenceImageUrl]]
						data-visualization-type="difference"
						width$=[[_originalMetaData.configuration.width]]
						height$=[[_originalMetaData.configuration.height]]
						on-tap="_imageClicked"
						on-load="_differenceImageCallback">
					</img>
				</div>
			</div>
		</div>
		
		<div class="spinner-container">
			<paper-spinner-lite active
				class$="[[_getSpinnerClassByState(state)]]">
			</paper-spinner-lite>
		</div>
		
		<activation-visualization-settings-dialog></activation-visualization-settings-dialog>
		<unit-details-dialog></unit-details-dialog>
		
		<link rel="stylesheet" type="text/css" href="difference.css">
	</template>

	<script src="difference.js"></script>
</dom-module>
