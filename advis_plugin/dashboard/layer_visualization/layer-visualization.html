<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../tf-backend/tf-backend.html">

<link rel="import" href="../neon-animation/neon-animated-pages.html">
<link rel="import" href="../paper-tabs/paper-tabs.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">

<link rel="import" href="../advis-icons/icons.html">
<link rel="import" href="../empty-state/empty-state.html">

<link rel="import" href="../input-image-selector/input-image-selector.html">
<link rel="import" href="../distortion-selector/distortion-selector.html">

<link rel="import" href="../side-by-side/side-by-side.html">
<link rel="import" href="../swipe/swipe.html">
<link rel="import" href="../crossfade/crossfade.html">
<link rel="import" href="../difference/difference.html">

<!--
	This module contains all UI components visualizing one of the model's layers.
-->
<dom-module id="layer-visualization">
	<template>
		<div id="content">
			<div id="header">
				<input-image-selector
					associated-dataset=[[associatedDataset]]
					selected-model=[[selectedModel]]
					selected-distortion=[[selectedDistortion]]
					available-images=[[_availableImages]]
					selected-image={{selectedImage}}
					request-manager=[[requestManager]]>
				</input-image-selector>
				
				<div id="predictions-button-container">
					<paper-icon-button id="detailed-predictions-button"
						icon="advis-icons:predictions"
						on-tap="openDetailedPredictions"
						disabled="[[!_imageSelected(selectedImage)]]">
					</paper-icon-button>
				</div>
				
				<distortion-selector
					available-distortions=[[distortions]]
					selected-distortion={{selectedDistortion}}>
				</distortion-selector>
			</div>
			
			<div id="body">
				<neon-animated-pages id="comparison-pages" selected=[[selectedPage]]>
					<side-by-side-comparison
						model=[[selectedModel]]
						layer=[[selectedLayer]]
						image-index=[[selectedImage.index]]
						distortion=[[selectedDistortion]]
						request-manager=[[requestManager]]>
					</side-by-side-comparison>
					<swipe-comparison
						model=[[selectedModel]]
						layer=[[selectedLayer]]
						image-index=[[selectedImage.index]]
						distortion=[[selectedDistortion]]
						request-manager=[[requestManager]]>
					</swipe-comparison>
					<crossfade-comparison
						model=[[selectedModel]]
						layer=[[selectedLayer]]
						image-index=[[selectedImage.index]]
						distortion=[[selectedDistortion]]
						request-manager=[[requestManager]]>
					</crossfade-comparison>
					<difference-comparison
						model=[[selectedModel]]
						layer=[[selectedLayer]]
						image-index=[[selectedImage.index]]
						distortion=[[selectedDistortion]]
						request-manager=[[requestManager]]>
					</difference-comparison>
				</neon-animated-pages>
				<empty-state
					headline="No Node Selected"
					caption="Please select a leaf node from the graph
						to analyze its activations on the selected input image.">
				</empty-state>
			</div>
			
			<div id="footer">
				<paper-tabs selected={{selectedPage}} scrollable fit-container>
					<paper-tab>Side by Side</paper-tab>
					<paper-tab>Swipe</paper-tab>
					<paper-tab>Crossfade</paper-tab>
					<paper-tab>Difference</paper-tab>
				</paper-tabs>
			</div>
		</div>
		
		<link rel="stylesheet" type="text/css" href="layer-visualization.css">
	</template>

	<script src="layer-visualization.js"></script>
</dom-module>
