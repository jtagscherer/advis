<link rel="import" href="../../iron-icon/iron-icon.html">
<link rel="import" href="../../iron-selector/iron-selector.html">
<link rel="import" href="../../paper-input/paper-input.html">
<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../tf-backend/tf-backend.html">
<link rel="import" href="../../tf-categorization-utils/tf-categorization-utils.html">
<link rel="import" href="../../tf-categorization-utils/tf-category-pane.html">
<link rel="import" href="../../tf-dashboard-common/dashboard-style.html">
<link rel="import" href="../../tf-dashboard-common/tf-dashboard-layout.html">
<link rel="import" href="../../tf-tensorboard/registry.html">

<link rel="import" href="../../section-header/section-header.html">
<link rel="import" href="../../model-list-item/model-list-item.html">

<link rel="import" href="../../layer-image/layer-image.html">
<link rel="import" href="../../graph-view/graph-view.html">

<!--
	This frontend displays all Advis visualizations.
-->
<dom-module id="advis-dashboard">
	<template>
		<tf-dashboard-layout>
			<div class="sidebar">
				<section-header text="Models"></section-header>
				<iron-selector>
					<template is="dom-repeat" items="[[_availableRuns]]">
						<div class="list-item models" data-args$=[[item.index]]>
							<model-list-item
								title="[[item.name]]"
								caption="Run [[item.index]]"
								last-item="[[_isLastModelItem(index)]]">
							</model-list-item>
						</div>
					</template>
				</iron-selector>
			</div>
			<div class="center">
				<template is="dom-if" if="[[_dataNotFound]]">
					<div class="no-data-warning">
						<h3>No Advis data could be found.</h3>
						<p>Probable causes:</p>
						<ul>
							<li>You haven’t written any appropriate data to your event files.
							<li>TensorBoard can’t find your event files.
						</ul>
						<p>
							Check out the
							<a href="https://github.com/jtagscherer/advis#usage">documentation</a> 
							for a quick start on how to visualize your model using Advis.
						</p>
					</div>
				</template>
				<template is="dom-if" if="[[!_dataNotFound]]">
					<template is="dom-if" if="[[_graphNotFound]]">
						<div class="no-data-warning">
							<h3>No Graph data could be found.</h3>
							<p>
								Please make sure you are exporting graph definitions with each 
								run.
							</p>
							<p>
								Refer to the
								<a href="https://github.com/jtagscherer/advis#usage">documentation</a> 
								for more information.
							</p>
						</div>
					</template>
					<div id="graph-container">
						<template is="dom-if" if="[[!_graphNotFound]]">
							<graph-view id="graph" pbtxt-file-location="[[_graphUrl]]"></graph-view>
						</template>
					</div>
					<div id="bottom-container">
						<layer-image
							run="[[currentRun]]"
							tag="[[currentTag]]"
							request-manager="[[_requestManager]]">
						</layer-image>
					</div>
				</template>
			</div>
		</tf-dashboard-layout>

		<style include="dashboard-style"></style>
		<link rel="stylesheet" type="text/css" href="dashboard.css">
	</template>

	<script src="dashboard.js"></script>
</dom-module>
